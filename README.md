# SPI Communication through VeriLog

## Project Overview
This project involves designing a Serial Peripheral Interface (SPI) communication module in Verilog. The design includes both an SPI transmitter and receiver, allowing data exchange between a master device and a slave device. The goal is to implement a configurable SPI communication system and verify its functionality through simulation using VIVADO Software.

## Project Components
  1. Top Module : This module integrates the SPI transmitter and receiver, handles the clock generation for SPI communication, and manages the state transitions for sending and receiving data.
  2. Testbench (tb): This module is used to simulate the top module, providing the necessary inputs and observing the outputs to verify the functionality of the SPI communication system.

## Top Module Description:
  ### Parameters
  - board_clk: Clock frequency of the board (100,000 Hz).
  - clk_value: Desired SPI clock frequency (10,000 Hz).
  - bits: Number of bits to be transmitted/received (configurable, default 12).
  
  ### Inputs
  - clk: Main clock input.
  - start: Signal to start the SPI communication.
  - din: Data input to be transmitted (12 bits).

  ### Output
  - mosi: Master Out Slave In signal.
  - sclk: SPI clock signal.
  - dout: Data output received from SPI communication (12 bits).

  ### Functionality
  The top module generates the SPI clock (sclk) from the main clock (clk) and manages the state transitions for transmitting and receiving data. The module ensures that data is correctly transmitted bit by     bit through the mosi signal and received through the SPI clock signal (sclk).

  ### SPI Clock Generation
  The SPI clock is generated by dividing the main clock frequency according to the desired SPI clock frequency. This is managed by a counter and a clock toggling mechanism.

  ### State Machine
  The state machine handles the following states:
- Idle: Waiting for the start signal.
- Start Transmission: Preparing for data transmission.
- Send: Transmitting data bits sequentially.
- End Transmission: Finalizing the transmission process.

  ### Data Reception
  The received data is stored in a shift register (shiftrx), and the bits are reversed using the reverse_bits module to ensure correct alignment.

  ## Reverse Bits Module Description
  ### Inputs da_in : Input 12 bit data to be reversed
  ### Outputs da_out : Output data with bits reversed

  ### Functionality
  This module iterates over the input data bits and reverses their order, ensuring that the transmitted data is correctly aligned with the received data.

  ## Testbench Description
  ### Functionality
  The testbench simulates the top module by providing clock signals, start signals, and data inputs. It observes the outputs and verifies the correct functionality of the SPI communication system.

  ### Testbench Code
  ```
  module tb_top;

    reg clk = 0;
    reg start = 1;
    wire sclk;
    reg [11:0] din = 12'hf5;
    wire [11:0] dout;
    wire mosi;

    // Instantiate the top module
    top #(.bits(12)) dut (
        .clk(clk),
        .start(start),
        .din(din),
        .mosi(mosi),
        .sclk(sclk),
        .dout(dout)
    );
```
    // Clock generation process
    always #5 clk = ~clk;

    // Initial process
    initial begin
        // Reset signals
        start = 1;
        #10;
        start = 0;
        #100;
        $display("Simulation complete");
        $finish;
    end

endmodule 
```

## Conclusion
This project demonstrates the implementation of an SPI communication system in Verilog. The top module integrates the SPI transmitter and receiver, manages clock generation, and handles state transitions for data transmission and reception. The design is configurable for different bit lengths, making it versatile for various applications.

### Further Improvements
- Parameterization: Make the bit length (bits) fully configurable throughout the code.
- Error Handling: Implement error detection and handling mechanisms.
- Enhancements: Add support for different SPI modes and configurations.



  
